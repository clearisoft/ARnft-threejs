!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three/examples/jsm/loaders/GLTFLoader")):"function"==typeof define&&define.amd?define(["exports","three/examples/jsm/loaders/GLTFLoader"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ARnftThreejs={},e.GLTFLoader)}(this,(function(e,t){"use strict";class i{static interpolate(e){for(let t=0;t<16;t++)this.trackedMatrix.delta[t]=e[t]-this.trackedMatrix.interpolated[t],this.trackedMatrix.interpolated[t]=this.trackedMatrix.interpolated[t]+this.trackedMatrix.delta[t]/24;return this.trackedMatrix.interpolated}static isMobile(){return/Android|mobile|iPad|iPhone/i.test(navigator.userAgent)}static setMatrix(e,t){const i=[];for(const e in t)i[e]=t[e];"function"==typeof e.elements.set?e.elements.set(i):e.elements=[].slice.call(i)}}i.trackedMatrix={delta:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],interpolated:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};e.NFTaddTJS=class{constructor(e){this.root=e}add(e){document.addEventListener("getNFTData",(t=>{var i=t.detail;e.position.y=i.height/i.dpi*2.54*10/2,e.position.x=i.width/i.dpi*2.54*10/2})),this.root.add(e)}addModel(e,i,r,a,n){let s;(new t.GLTFLoader).load(e,(e=>{s=e.scene,s.scale.set(n,n,n),s.rotation.x=Math.PI/2,s.position.x=i,s.position.y=r,s.position.z=a,this.root.add(s)}))}addImage(e,t,i){const r=new THREE.PlaneGeometry(1,1,1,1),a=(new THREE.TextureLoader).load(e),n=new THREE.MeshStandardMaterial({color:t,map:a}),s=new THREE.Mesh(r,n);s.scale.set(i,i,i),document.addEventListener("getNFTData",(e=>{var t=e.detail;s.position.y=t.height/t.dpi*2.54*10/2,s.position.x=t.width/t.dpi*2.54*10/2})),this.root.add(s)}addVideo(e,t){this.root;const i=document.getElementById(e),r=new THREE.VideoTexture(i),a=new THREE.MeshStandardMaterial({color:12303359,map:r});i.play();const n=new THREE.PlaneGeometry(1,1,1,1),s=new THREE.Mesh(n,a);s.scale.set(t,t,t),document.addEventListener("getNFTData",(e=>{var t=e.detail;s.position.y=t.height/t.dpi*2.54*10/2,s.position.x=t.width/t.dpi*2.54*10/2})),this.root.add(s)}},e.SceneRendererTJS=class{constructor(e,t,i,r,a){this.configData=e,this.uuid=r,this.root=i,this.renderer=new THREE.WebGLRenderer({canvas:t,context:e.renderer.context,alpha:e.renderer.alpha,premultipliedAlpha:e.renderer.premultipliedAlpha,antialias:e.renderer.antialias,stencil:e.renderer.stencil,precision:e.renderer.precision,depth:e.renderer.depth,logarithmicDepthBuffer:e.renderer.logarithmicDepthBuffer}),this.renderer.setPixelRatio(window.devicePixelRatio),this.scene=new THREE.Scene,this.camera=!0===a?new THREE.PerspectiveCamera(e.camera.fov,e.camera.ratio,e.camera.near,e.camera.far):new THREE.Camera,this.version="0.1.0",console.log("ARnftThreejs version: ",this.version)}initRenderer(){this.camera.matrixAutoUpdate=!1,document.addEventListener("getProjectionMatrix",(e=>{i.setMatrix(this.camera.projectionMatrix,e.detail.proj)})),this.scene.add(this.camera);const e=new THREE.AmbientLight(16777215);this.scene.add(e),document.addEventListener("getMatrixGL_RH-"+this.uuid,(e=>{this.root.visible=!0;const t=i.interpolate(e.detail.matrixGL_RH);i.setMatrix(this.root.matrix,t)})),document.addEventListener("nftTrackingLost",(e=>{this.root.visible=this.configData.renderer.objVisibility})),this.root.visible=!1,this.scene.add(this.root),document.addEventListener("getWindowSize",(e=>{this.renderer.setSize(e.detail.sw,e.detail.sh)}));const t=new CustomEvent("onInitThreejsRendering",{detail:{renderer:this.renderer,scene:this.scene,camera:this.camera}});document.dispatchEvent(t)}draw(){this.renderer.render(this.scene,this.camera)}getRenderer(){return this.renderer}getScene(){return this.scene}getCamera(){return this.camera}setRenderer(e){this.renderer=e}setScene(e){this.scene=e}setCamera(e){this.camera=e}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ARnftThreejs.js.map
